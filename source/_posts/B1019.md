---
title: 乙级 1019 数字黑洞
date: 2019-1-14 20:45:00
categories: PAT
tags: [C, C++, PAT乙级, OJ]
---

## 描述

给定任一个各位数字不完全相同的 4 位正整数，如果我们先把 4 个数字按非递增排序，再按非递减排序，然后用第 1 个数字减第 2 个数字，将得到一个新的数字。一直重复这样做，我们很快会停在有“数字黑洞”之称的 6174，这个神奇的数字也叫 Kaprekar 常数

输入: 
输入给出一个 (0,10<sup>4</sup>) 区间内的正整数 N\
输出:
如果 N 的 4 位数字全相等，则在一行内输出 `N - N = 0000`；否则将计算的每一步在一行内输出，直到 6174 作为差出现，输出格式见样例。注意每个数字按 4 位数格式输出。

## 分析

有一个测试用例注意点，如果当输入N值为6174的时候，依旧要进行下面的步骤，直到差值为6174才可以
所以用do while语句，无论是什么值总是要执行一遍while语句，直到遇到差值是0000或6174


## 代码

```C

#include <stdio.h>

int main() {
 int num;
 scanf("%d", &num);
 int numArr[4];
 void setArr(int num, int arr[]);
 int getArr(int arr[]);
 int isSame(int arr[]);
 void ascendSort(int arr[]);
 void descendSort(int arr[]);

  setArr(num, numArr);


 do {
   if (isSame(numArr)) {
     printf("%4d - %4d = 0000", num, num);
     return 0;
   }
   descendSort(numArr);
   int subtrahend = getArr(numArr);
   ascendSort(numArr);
   int subtractor = getArr(numArr);
   int result = subtrahend - subtractor;
   printf("%04d - %04d = %04d\n", subtrahend, subtractor, result);
   setArr(result, numArr);
 } while (getArr(numArr) != 6174);

}

void setArr(int num, int arr[]) {
  arr[0] = num / 1000;
  arr[1] = num % 1000 / 100;
  arr[2] = num % 100 / 10;
  arr[3] = num % 10;
}

int getArr(int arr[]) {
    return 1000 * arr[0] + 100 * arr[1] + 10 * arr[2] + arr[3];
}

int isSame(int arr[]) {
  return arr[0] == arr[1] && arr[1] == arr[2] && arr[2] == arr[3];
}

void descendSort(int arr[]) {
  // selecting sort
  for (int i = 0; i < 4; i++) {
    int maxPos = i;
    int max = arr[i];
    for (int j = i + 1; j < 4; j++) {
      if (arr[j] > max) {
        maxPos = j;
        max = arr[j];
      }
    }
    // exchange
    int temp = arr[i];
    arr[i] = max;
    arr[maxPos] = temp;
  }
}

void ascendSort(int arr[]) {
  // inseting sort
  for (int i = 0; i < 4; i++) {
    for (int j = i; j > 0 && arr[j] < arr[j-1]; j--) {
      //exchange arr[j], arr[j-1]
      int temp = arr[j];
      arr[j] = arr[j-1];
      arr[j-1] = temp;
    }
  }
}
```

## 参考
```c++
#include <iostream>
#include <algorithm>
using namespace std;
bool cmp(char a, char b) {return a > b;}
int main() {
    string s;
    cin >> s;
    s.insert(0, 4 - s.length(), '0');
    do {
        string a = s, b = s;
        sort(a.begin(), a.end(), cmp);
        sort(b.begin(), b.end());
        int result = stoi(a) - stoi(b);
        s = to_string(result);
        s.insert(0, 4 - s.length(), '0');
        cout << a << " - " << b << " = " << s << endl;
    } while (s != "6174" && s != "0000");
    return 0;
}
```