---
title: 创建对象
date: 2018-09-22 10:10:39
tags: [JavaScript, Font-end]
categories: 网络编程
---

---
# a protype-based language
JavaScript is often described as **a prototype-based language** — each object has a prototype object
这些原型作为模板对象，其属性被创建的对象继承
一个对象的原型也有原型，这构成了一个<abbr titile = "protypechain">原型链</abbr>。 当访问对象的属性，方法时，首先在该对象上寻找方法，如果没有找到，就上溯到原型对象中查找，如果遍历原型链也没有找到，则返回undefined
以`Array`为例，查找属性的原型链为
***var arr = [..]    ===>  Array.prototype   ===> Object.prototype ===> null***
`Array.prototype`定义了`indexOf()`，`shift()`等方法，因此可以在所有`Array`对象中调用这些方法



---
# 构造函数

JavaScript可以利用 **构造函数** 来创建对象

```javascript
function Stdudent(name) {
        this.name = name;
        this.hello = function () {
            alert("Hello, " + this.name + "!");
        }
}
``` 
在JavaScript中，可以使用`new`关键字来调用这个函数，并 **返回一个对象**
(new Date() : new Map() : new Set() : new RegExp())

```javascript
var xiaoming = new Student("小明");
xiaoming.name;     // "小明"
xiaoming.hello();    // "hello, 小明!"
```
如果不使用`new`，就是一个普通的函数，返回`undefined`； 如果使用`new`,函数成为构造函数，this指向新创建的对象，并默认返回this
xiaoming的原型链
***xioaming  ===> Student.prototype ===> Object.prototype ===> null***
 如果又通过构造函数创建了其他对象，他们的原型相同
`new Student()` 创建的对象还从原型上继承一个`constructor`属性，其等于构造函数`Student()`本身


```javascript
xiaoming.constructor === Student.prototype.constructor;      // true
Student.prototype.constructor === Student;                            // true
Object.getPrototypeOf(xiaoming) === Student.prototype;       //true
xiaoming instanceof Student                                                     //true
```
![relationship](http://muicoder.github.io/liaoxuefeng/javascript/images/B8293B19F4C954A0A8A69B7F11FA3555.png)



---
# shared method
构造函数定义的方法，虽然可能代码相同，但是在两个构造出的对象中，函数不等
```javascript
xiaoming.name;                                  // '小明'
xiaohong.name;                                  // '小红'
xiaoming.hello;                                    // function
xiaohong.hello;                                    // function
xiaoming.hello === xiaohong.hello;     //false
```
要创建一个共享的方法(类似于类的方法)，可以在原型上定义，这里就是在`Student.prototype`中定义

![shared methods](http://muicoder.github.io/liaoxuefeng/javascript/images/B8293B19F4C954A0A8A69B7F11FA3555.png)

```javascript
function Student(name) {
    this.name = name;
}
Student.prototype.hello = function () {
    alert('Hello, ' + this.name + '!');
};
```